<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>在线名片生成器</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script type="module" src="./app.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div id="app">
        <div class="container">
            <!-- 表单输入区 -->
            <div class="form-section">
                <h2>名片信息</h2>
                <div class="form-group">
                    <label>姓名：</label>
                    <input type="text" v-model="cardData.name">
                </div>
                <div class="form-group">
                    <label>职位：</label>
                    <input type="text" v-model="cardData.title">
                </div>
                <div class="form-group">
                    <label>电话：</label>
                    <input type="text" v-model="cardData.phone">
                </div>
                <div class="form-group">
                    <label>邮箱：</label>
                    <input type="text" v-model="cardData.email">
                </div>

                <div class="form-group">
                    <label>公司：</label>
                    <input type="text" v-model="cardData.company">
                </div>

                <div class="form-group">
                    <label>网站：</label>
                    <input type="text" v-model="cardData.website">
                </div>

                <div class="form-group">
                    <label>地址：</label>
                    <input type="text" v-model="cardData.address">
                </div>

                <div class="form-group">
                    <label>Logo：</label>
                    <input type="file" @change="handleLogoUpload" accept="image/*">
                </div>

                <div class="template-selector">
                    <h3>选择模板：</h3>
                    <button class="template-btn" v-for="(template, index) in templates" :key="index"
                        @click="selectedTemplate = template.id"
                        :style="{ backgroundColor: template.id === selectedTemplate ? '#e0e0e0' : '' }">
                        {{ template.name }}
                    </button>
                </div>

                <button @click="exportCard">导出图片</button>
            </div>

            <!-- 名片预览区 -->
            <div class="preview-section">
                <h2>预览</h2>
                <div class="card-template">
                    <div class="card-box" :style="currentTemplate.styles">
                        <div v-for="item in currentTemplate.elements" :key="item.key" :class="['pos-' + item.key, item.key + '-element']" :style="item.style">
                            <div v-if="item.key === 'name'" class="name"> {{ cardData.name }} </div>
                            <div v-if="item.key === 'title'" class="title">{{ cardData.title }}</div>
                            <div v-if="item.key === 'logo'" class="logo">
                                <img v-if="cardData.logo" :src="cardData.logo" :style="{ width: item.width }">
                            </div>
                            <div v-if="item.key === 'phone' && cardData.phone" class="phone icon-item">
                                <i class="fa-sharp fa-solid fa-phone"></i>
                                <span>{{ cardData.phone }}</span>
                            </div>
                            <div v-if="item.key === 'address' && cardData.address" class="addres icon-item">
                                <i class="fa-sharp fa-solid fa-map-marker-alt"></i>
                                <span>{{ cardData.address }}</span>
                            </div>
                            <div v-if="item.key === 'email' && cardData.email" class="email icon-item">
                                <i class="fa-sharp fa-solid fa-envelope"></i>
                                <span>{{ cardData.email }}</span>
                            </div>
                            <div v-if="item.key === 'website' && cardData.website" class="website icon-item">
                                <i class="fa-sharp fa-solid fa-globe"></i>
                                <span>{{ cardData.website }}</span>
                            </div>
                            <div v-if="item.key === 'company' && cardData.company" class="company icon-item">
                                <i class="fa-sharp fa-solid fa-building"></i>
                                <span>{{ cardData.company }}</span>
                            </div>
                        </div>
                        <div id="qrcode-container" class="icon-item" :style="currentTemplate.qrcode.style"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>